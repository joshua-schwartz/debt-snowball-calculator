<html>
<head>

</head>
<body>
<script type="text/javascript">


// chartArray = [['Month', 'Remaining Debt', 'Principle Paid', 'Monthly Interest', 'Total Interest Paid']]

// chartArray.push([months, debt, principlePaid, monthlyInterest, interestPaid]);
  
//   google.charts.load('current', {'packages':['corechart']});
//   google.charts.setOnLoadCallback(drawChart);

//   function drawChart() {
//     var data = google.visualization.arrayToDataTable(chartArray);

//     var options = {
//       title: 'Debt Payoff Options',
//       curveType: 'function',
//       legend: { position: 'bottom' }
//     };

//     var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

//     chart.draw(data, options);
//   }

(function(){
  var remainingTotalBalance, monthsToDebtFree, totalInterestPaid, monthlyDebtBudget;
  
  var debts = [
    {
      balance: 1400,
      interestRate: 0.039
    },
    {
      balance: 9400,
      interestRate: 0.019
    },
    {
      balance: 1900,
      interestRate: 0.099
    }
  ];

  function sortDebtsByBalance() {
      debts.sort((a, b) => a.balance - b.balance);
  }

  function sortDebtsByInterestRate() {
      debts.sort((a, b) => a.interestRate - b.interestRate);
  }

  function updateRemainingTotalBalance() {
    var totalBalance = 0;
    
    for(i = 0; i < debts.length; i++) {
      var debtItem = debts[i];
      totalBalance += debtItem.balance;
    }
    
    remainingTotalBalance = totalBalance;
  }

  function getMonthlyInterest() {
      var monthlyInterest = 0;

      for(i = 0; i < debts.length; i++) {
          var debtItem = debts[i];
          monthlyInterest += ((debtItem.balance * debtItem.interestRate) / 12);
      }

      return monthlyInterest;
  }
  
  function makePayment(paymentAmount) {
      var currentDebtIndex = debts.length - 1;
      if (!debts.length) { return false };

      var debtItem = debts[currentDebtIndex];

      if (debtItem.balance > paymentAmount) {
          debtItem.balance -= paymentAmount;
      } else {
          var spilloverCash = paymentAmount - debtItem.balance;
          debts.pop();
          makePayment(spilloverCash);
      }
  }

  remainingTotalBalance = 1;
  monthsToDebtFree = 0;
  totalInterestPaid = 0;
  monthlyDebtBudget = 2000;

  sortDebtsByInterestRate();

  while(remainingTotalBalance > 0) {
    var monthlyInterest = getMonthlyInterest();
    var principlePayment = monthlyDebtBudget - monthlyInterest;
    
    monthsToDebtFree++;
    totalInterestPaid += monthlyInterest;
    makePayment(principlePayment);
    updateRemainingTotalBalance();
  }

  console.log("Months to debt free: " + monthsToDebtFree, "Total interest paid: " + totalInterestPaid);
})();

</script>
</body>
</html>